<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>无标题文档</title>

<style>
#div1{
	width:100px;
	height:100px;
	background:#03C;
	position:absolute;
	left:10px;
	top:40px;
}
</style>
</head>

<body>
	<input id="btn1" type="button" value="往后"></input>
	<input id="btn2" type="button" value="往前"></input>
	<div id="div1"></div>
<script>
var oBtn1=document.getElementById('btn1');
var oBtn2=document.getElementById('btn2');
var oDiv=document.getElementById('div1');
//var timer=null;
//oDiv.timer=null;自定义属性 

oBtn1.onclick = function(){
	
	doMove(oDiv,-20,10);
	
	/*
	clearInterval(oDiv.timer);//否则会根据点击的次数 速度会愈来愈快
		
	oDiv.timer=setInterval(function(){
		
    var speed = parseInt(getStyle(oDiv,'left'))+-5;//parseInt 30px变成30,
  
	if(speed <30){//赋值前限制 步长无法被800整除时 停止的数据会大于800
	
	     speed =30;
	}
	
	oDiv.style.left = speed +'px';//div如果不定位则无法解析
	
	//alert(parseInt(getStyle(oDiv,'left')));
	if(speed == 30){
		
		clearInterval(oDiv.timer);
		
		//alert(speed);
	}
	
	},30)
  */
}
oBtn2.onclick = function(){
	
	doMove(oDiv,20,800);
    
	/*clearInterval(oDiv.timer);//否则会根据点击的次数 速度会愈来愈快
		
	oDiv.timer=setInterval(function(){
		
    var speed = parseInt(getStyle(oDiv,'left'))+5;//parseInt 30px变成30,
  
	if(speed >800){//赋值前限制 步长无法被800整除时 停止的数据会大于800
	
	     speed =800;
	}
	
	oDiv.style.left = speed +'px';//div如果不定位则无法解析
	
	//alert(parseInt(getStyle(oDiv,'left')));
	if(speed == 800){
		
		clearInterval(oDiv.timer);
		
		//alert(speed);
	}
	
	},30)
	*/
}
	
	
	/*找出不同点 进行封装函数
	12 -12 800 -10 < > 
	doMove(oDiv对象.12方向,800目标的)
	
	*/
	//封装函数：
	
function doMove(obj,dir,target){
	
	clearInterval(obj.timer);//否则会根据点击的次数 速度会愈来愈快
	
	obj.timer=setInterval(function(){
		
		var speed = parseInt(getStyle(obj,'left'))+dir;//parseInt 30px变成30,

			if(speed > target && dir>0){//赋值前限制 步长无法被800整除时 停止的数据会大于800 前
			     speed = target;
			}

			if(speed < target && dir<0){//赋值前限制 步长无法被800整除时 停止的数据会大于800  后
			     speed = target;
			}

	obj.style.left = speed +'px';//div如果不定位则无法解析
	//alert(parseInt(getStyle(oDiv,'left')));
		if(speed == target){
			
			clearInterval(obj.timer);
			//alert(speed);
		}

	},30)

function getStyle(obj,attr){

	return obj.currentStyle?obj.currentStyle[attr]:getComputedStyle(obj)[

	attr];}

}
	
	
		
		
</script>
    
</body>
</html>
